# BlogPost App Server

This app has :

- RESTful endpoint for Post's CRUD operation
- JSON formatted response

&nbsp;

Tech Stack used to build this app :

- Koa JS
- Express JS framework
- PostgreSQL
- Sequelize ORM
- bcrypt
- JWT
- cors


&nbsp;

## Global Responses
> These responses are applied globally on all endpoints

_Response (400 - Bad Request)_
```
{
  "error": "<error message for 400>"
}
```

_Response (401 - Unauthorized)_
```
{
  "error": "<error message for 401>"
}
```

_Response (500 - Internal Server Error)_
```
{
  "error": "<error message for 500>"
}
```

# RESTful endpoints

## users endpoint



---

<details>
<summary>POST /register</summary>

&nbsp;

> Create new User

&nbsp;

**Request Body**

``` JS
{

  email: "<email to get insert into>",
  password: "<password to get insert into>",
}
```

**Response (201) (created)**

``` JSON
{
 "message":"Registration Success"
}
```

**Response (400) (Email is already used)**

``` JSON
{
  "error" : "Email is already used"
}
```



**Response (400) (validation error: register with registered username)**

``` JSON
{
  "error" : "Email is already used"
}
```

**Response (400) (validation error: register password with less than 6 chararacters)**

``` JSON
{
  "error" : "Minimum password length is 6 characters"
}
```

**Response (500) (Internal server error)**

```JSON
{
  "error": "Internal Server Error"
}
```

</details>

---
<details>
<summary>GET /register/verify </summary>

&nbsp;

> verify new registered user
&nbsp;

**Request Query**

``` JS
token="<user token>"
```

**Response (201) (created)**

``` JSON
{
 "message":"Verification Success"
}
```






**Response (401) (Token Error)**

``` JSON
{
  "error" : "Invalid access token"
}
```

**Response (500) (Internal server error)**

```JSON
{
  "error": "Internal Server Error"
}
```

</details>

---

<details>
<summary>POST /login </summary>

&nbsp;

> login  to get authentication(access_token)


&nbsp;

**Request Body**

``` JSON
{
  "email": "<email to log into>",
  "password": "<password to log into>",
}
```

**Response (200) (logged)**

```JSON
{
 "access_token": "<generated by server>"
}
```

**Response (400) (Wrong email / password)**

``` JSON
{
  "error": "Invalid Email / Password"
}
```

**Response (500) (Internal server error)**

```JSON
{
  "error": "Internal Server Error"
}
```
</details>

---



&nbsp;
## items endpoint

<details>
<summary>GET /items </summary>

&nbsp;

> get all posts
&nbsp;




**Response (200)**

**Response (200)**

```JSON
[
  {
    "id": 1,
    "UserId": 1,
    "title": "post's title",
    "image": "https://52f4e29a8321344e30ae-0f55c9129972ac85d6b1f4e703468e6b.ssl.cf2.rackcdn.com/products/pictures/1155781.jpg",
    "moderated": false,
    "content": "post's content",
    "createdAt": "2021-05-29T06:56:03.616Z",
    "updatedAt": "2021-05-29T06:56:03.616Z"
  },
  {
    "id": 2,
    "UserId": 1,
    "title": "post's title",
    "image": "https://52f4e29a8321344e30ae-0f55c9129972ac85d6b1f4e703468e6b.ssl.cf2.rackcdn.com/products/pictures/1155848.jpg",
    "moderated": true,
    "content": "post's content",
    "createdAt": "2021-05-29T06:56:03.616Z",
    "updatedAt": "2021-05-29T06:56:03.616Z"
  }
]
```



**Response (500) (Internal server error)**

```JSON
{
  "error": "Internal Server Error"
}
```
</details>

<details>
